<!-- Copyright (C) Microsoft Corporation. All rights reserved. -->
<!DOCTYPE html>
<html>
  <head>
    <script>
      globalThis.MonacoPerformanceMarks = globalThis.MonacoPerformanceMarks || [];
      globalThis.MonacoPerformanceMarks.push("renderer/started", Date.now());
    </script>

    <meta charset="utf-8" />
    <title>Code Server</title>

    <!-- Disable pinch zooming -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"
    />

    <!-- Workbench Configuration -->
    <meta id="vscode-workbench-web-configuration" data-settings="{{{json workbenchOptions.workbenchWebConfiguration}}}" />
    <meta id="monaco-workbench-meta-theme-color" name="theme-color" content="" />
    <!-- Workarounds/Hacks (remote user data uri) -->
    <meta id="vscode-remote-user-data-uri" data-settings="{{{json workbenchOptions.remoteUserDataUri}}}" />
    <meta id="vscode-remote-product-configuration" data-settings="{{{json workbenchOptions.productConfiguration}}}" />
    <meta id="vscode-remote-nls-configuration" data-settings="{{{json workbenchOptions.nlsConfiguration}}}" />

    <!-- Workbench Icon/Manifest/CSS -->
    <link rel="icon" href="{{assetPath base '/static/media/favicon.ico'}}" type="image/x-icon" />
    <link rel="manifest" href="./code-server.webmanifest" crossorigin="use-credentials" />

    {{#if (prod)}}
      <link data-name="vs/workbench/workbench.web.api" rel="stylesheet" href="{{assetPath base '/vscode/lib/vscode/out/vs/workbench/workbench.web.api.css'}}">
    {{/if}}

    <link rel="apple-touch-icon" href="{{assetPath base '/static/media/pwa-icon-384.png'}}" />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <!-- Prefetch to avoid waterfall -->
    {{#if (prod)}}
      <link rel="prefetch" href="{{assetPath base '/vscode/lib/vscode/node_modules/semver-umd/lib/semver-umd.js'}}">
    {{/if}}

    <meta id="coder-options" data-settings="{{{json coderOptions}}}" />
  </head>

  <body aria-label=""></body>

  <!-- Startup (do not modify order of script tags!) -->
  <script data-cfasync="false" src="{{assetPath base '/static/views/vscode/index.js'}}"></script>
  <script data-cfasync="false" src="{{assetPath base '/static/main.js'}}"></script>
  <script data-cfasync="false" src="{{assetPath base '/vscode/lib/vscode/out/vs/loader.js'}}"></script>

  <script>
    globalThis.MonacoPerformanceMarks.push("willLoadWorkbenchMain", Date.now());
  </script>

  {{#if (prod)}}
    <script data-cfasync="false" src="{{assetPath base '/vscode/lib/vscode/out/vs/workbench/workbench.web.api.nls.js'}}"></script>
    <script data-cfasync="false" src="{{assetPath base '/vscode/lib/vscode/out/vs/workbench/workbench.web.api.js'}}"></script>
  {{/if}}

  <script>
    require.config({baseUrl: `${window.location.origin}/{{base}}/vscode/lib/vscode/out`});
    require(["vs/code/browser/workbench/workbench"], function () {});
  </script>
</html>
